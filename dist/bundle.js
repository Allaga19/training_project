(()=>{"use strict";const e=function(e){var t=document.getElementById(e),n=document.createElement("div"),o=document.querySelector(".popup"),c=document.querySelectorAll("#".concat(e," input"));n.style.cssText="font-size: 2rem; color: white",t.addEventListener("input",(function(e){e.target.matches('input[name="user_phone"]')&&(e.target.value=e.target.value.replace(/[^+\d]/g,""))})),t.addEventListener("input",(function(e){e.target.matches('input[name="user_email"]')&&(e.target.value=e.target.value.replace(/[^a-z@-_\.\!\~\*\']/g,""))})),t.addEventListener("input",(function(e){e.target.matches('input[name="user_name"]')&&(e.target.value=e.target.value.replace(/( |^)[А-Яа-яёa-z]/g,(function(e){return e.toUpperCase()})))})),t.addEventListener("input",(function(e){e.target.matches('input[name="user_message"]')&&(e.target.value=e.target.value.replace(/[^А-Яа-яЁё,.]/gi,""))})),t.addEventListener("submit",(function(e){e.preventDefault(),t.append(n),n.textContent="Загрузка...";var a,r=new FormData(t),i={};r.forEach((function(e,t){return i[t]=e})),(a=i,fetch("server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).then((function(e){if(200!==e.status)throw new Error("Response status code is not 200");n.textContent="Спасибо! Мы скоро с вами свяжемся."})).catch((function(e){n.textContent="Что-то пошло не так...",console.error(e)})),c.forEach((function(e){return e.value=""})),setTimeout((function(){return n.remove()}),5e3),setTimeout((function(){return o.style.display="none"}),7e3)}))};var t,n,o,c,a,r,i,s,u,l,d,m,v,f,p;m=document.getElementById("timer-hours"),v=document.getElementById("timer-minutes"),f=document.getElementById("timer-seconds"),p=function(e){return e<10&&(e="0"+e),e},function e(){var t,n,o,c=(t=(new Date("04 03 2022").getTime()-(new Date).getTime())/1e3,n=Math.floor(t%60),o=Math.floor(t/60%60),{timeRemaining:t,hours:Math.floor(t/60/60)%24,minutes:o,seconds:n});m.textContent=p(c.hours),v.textContent=p(c.minutes),f.textContent=p(c.seconds),c.timeRemaining>0&&setTimeout(e,1e3)}(),d=document.querySelector("menu"),document.addEventListener("click",(function(e){var t=e.target;t.closest(".menu")||t.classList.contains("close-btn")||t.matches("ul>li>a")?d.classList.toggle("active-menu"):t.closest(".active-menu")||d.classList.remove("active-menu")})),r=document.querySelector(".popup"),i=document.querySelectorAll(".popup-btn"),s=r.querySelector(".popup-content"),u={count:-445,speed:10,startActiv:-445,endActiv:0},l=function e(){u.startActiv>u.endActiv?u.count-=u.speed:u.count+=u.speed,s.style.transform="translateY(".concat(u.count,"px)"),(u.startActiv>u.endActiv?u.count>u.endActiv:u.count<u.endActiv)&&requestAnimationFrame(e)},i.forEach((function(e){e.addEventListener("click",(function(){r.style.display="block",screen.width>768&&(u.count=u.startActiv,requestAnimationFrame(l))}))})),r.addEventListener("click",(function(e){var t=e.target;t.classList.contains("popup-close")?r.style.display="none":(t=t.closest(".popup-content"))||(r.style.display="none")})),o=document.querySelector(".service-header"),c=o.querySelectorAll(".service-header-tab"),a=document.querySelectorAll(".service-tab"),o.addEventListener("click",(function(e){var t=e.target;(t=t.closest(".service-header-tab"))&&c.forEach((function(e,n){e===t&&function(e){for(var t=0;t<a.length;t++)e===t?(c[t].classList.add("active"),a[t].classList.remove("d-none")):(c[t].classList.remove("active"),a[t].classList.add("d-none"))}(n)}))})),function(){var e,t=document.querySelectorAll(".portfolio-item"),n=document.querySelector(".portfolio-dots"),o=document.querySelector(".portfolio-content"),c=0;t.forEach((function(e,t){var o=document.createElement("li");0===t?(o.classList.add("dot-active"),o.classList.add("dot")):o.classList.add("dot"),n.append(o)}));var a=document.querySelectorAll(".dot"),r=function(e,t,n){e[t].classList.remove(n)},i=function(e,t,n){e[t].classList.add(n)},s=function(){r(t,c,"portfolio-item-active"),r(a,c,"dot-active"),++c>=t.length&&(c=0),i(t,c,"portfolio-item-active"),i(a,c,"dot-active")},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;e=setInterval(s,t)};o.addEventListener("click",(function(e){e.preventDefault();var n=e.target;n.matches(".portfolio-btn, .dot")&&(r(t,c,"portfolio-item-active"),r(a,c,"dot-active"),n.matches("#arrow-right")?c++:n.matches("#arrow-left")?c--:n.matches(".dot")&&a.forEach((function(e,t){e===n&&(c=t)})),c>=t.length&&(c=0),c<0&&(c=t.length-1),i(t,c,"portfolio-item-active"),i(a,c,"dot-active"))})),o.addEventListener("mouseover",(function(t){(t.target.matches(".portfolio-btn")||t.target.matches(".dot"))&&clearInterval(e)})),o.addEventListener("mouseout",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&u()})),u(1500)}(),t=document.querySelector("#command .row"),n=function(){var e=event.target;if(e.classList.contains("command__photo")){var t=e.src;e.src=e.dataset.img,e.dataset.img=t}},t.addEventListener("mouseover",n),t.addEventListener("mouseout",n),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),c=document.querySelector(".calc-day"),a=document.querySelector(".calc-count"),r=document.getElementById("total"),i=function(){t.addEventListener("input",(function(e){var t=e.target;t.matches("input.calc-item")&&(t.value=t.value.replace(/\D/g,""))}))};i();var s=function(){var t=0,i=1,s=1,u=n.options[n.selectedIndex].value,l=+o.value;a.value>1&&(i+=(a.value-1)/10),c.value&&c.value<5?s*=2:c.value&&c.value<10&&(s*=1.5),u&&l&&(t=e*u*l*i*s),r.textContent=t};t.addEventListener("change",(function(e){var t=e.target;(t.matches("select")||t.matches("input"))&&s()}))}(100),e("form1"),e("form2"),e("form3")})();